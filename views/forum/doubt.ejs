<%- include('../partials/header') %>

<div class="container mt-5">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <h1 class="mb-4 text-primary"><%= __('New Doubt/Forum Post') %></h1>

            <form action="/forum/ask" method="POST" class="needs-validation" novalidate>
                <div class="mb-3">
                    <label for="title" class="form-label"><%= __('Title/Topic') %></label>
                    <input type="text" class="form-control" id="title" name="subject" required 
                           placeholder="<%= __('Apne doubt ka short title likhen') %>">
                    <div class="invalid-feedback">
                        <%= __('Please provide a title for your doubt.') %>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="description" class="form-label"><%= __('Detailed Description') %></label>
                    <textarea class="form-control" id="description" name="question" rows="7" required
                              placeholder="<%= __('Apne doubt ko detail mein explain karein.') %>"></textarea>
                    <div class="invalid-feedback">
                        <%= __('Please provide a detailed description of your doubt.') %>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label for="tags" class="form-label"><%= __('Tags (e.g., nodejs, math, mongo)') %></label>
                    <input type="text" class="form-control" id="tags" name="tags"
                                                 placeholder="<%= __('Tags ko comma se separate karein') %>">
                    <div class="form-text"><%= __('Separate tags with commas for better visibility.') %></div>
                </div>

                                <% if (locals.classes && locals.classes.length) { %>
                                    <div class="mb-3">
                                        <label for="classId" class="form-label"><%= __('Post to Class') %></label>
                                        <select name="classId" id="classId" class="form-select">
                                            <% locals.classes.forEach(c => { %>
                                                <option value="<%= c._id %>"><%= __('Class') %> <%= c.classNumber %></option>
                                            <% }) %>
                                        </select>
                                    </div>
                                <% } %>

                <div class="d-grid gap-2">
                    <button class="btn btn-success btn-lg" type="submit"><%= __('Post Doubt') %></button>
                    <a href="/forum" class="btn btn-secondary"><%= __('Cancel') %></a>
                </div>
            </form>

        </div>
    </div>
    
</div>
    <%- include('../partials/footer') %>

