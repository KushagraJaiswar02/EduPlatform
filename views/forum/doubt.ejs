<%- include('../partials/header') %>

<div class="container py-5">

  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">

      <!-- CARD WRAPPER -->
      <div class="card border-0 shadow-lg rounded-4">
        <div class="card-body p-4">

          <!-- Header -->
          <div class="text-center mb-4">
            <h2 class="fw-bold text-primary">Ask a Doubt</h2>
            <p class="text-muted mb-0">Post your question and get answers from teachers & students</p>
          </div>

          <!-- FORM -->
          <form action="/forum/ask" method="POST" class="needs-validation" novalidate>

            <!-- Title -->
            <div class="mb-3">
              <label class="form-label fw-semibold">Title / Topic</label>
              <input 
                type="text" 
                class="form-control form-control-lg rounded-3" 
                id="title" 
                name="subject" 
                placeholder="Short title for your doubt" 
                required
              >
              <div class="invalid-feedback">Please provide a valid title.</div>
            </div>

            <!-- Description -->
            <div class="mb-3">
              <label class="form-label fw-semibold">Detailed Description</label>
              <textarea 
                class="form-control rounded-3" 
                id="description" 
                name="question" 
                rows="6" 
                placeholder="Explain your doubt clearly with details" 
                required
              ></textarea>
              <div class="invalid-feedback">Please describe your doubt.</div>
            </div>

            <!-- Tags -->
            <div class="mb-3">
              <label class="form-label fw-semibold">Tags</label>
              <input 
                type="text" 
                class="form-control rounded-3" 
                id="tags" 
                name="tags" 
                placeholder="e.g., math, fractions, science, grammar"
              >
              <div class="form-text">Use commas to separate tags.</div>
            </div>

            <!-- Class Selection (teachers only) -->
            <% if (classes && classes.length) { %>
              <div class="mb-3">
                <label class="form-label fw-semibold">Post to Class</label>
                <select class="form-select rounded-3" id="classId" name="classId">
                  <% classes.forEach(cls => { %>
                    <option value="<%= cls._id %>">
                      Class <%= cls.classNumber %>
                    </option>
                  <% }) %>
                </select>
              </div>
            <% } %>

            <!-- Buttons -->
            <div class="d-grid gap-2 mt-4">
              <button type="submit" class="btn btn-primary btn-lg rounded-3">
                Post Doubt
              </button>

              <a href="/forum" class="btn btn-outline-secondary btn-lg rounded-3">
                Cancel
              </a>
            </div>

          </form>

        </div>
      </div>

    </div>
  </div>

</div>

<%- include('../partials/footer') %>
